<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Taxa Landing Page</title>
  <link rel="stylesheet" href="assets/style.css" />
  <style>
    .grid { display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center; }
    .tile {
      width: 200px;
      text-align: center;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
      text-decoration: none;
      color: inherit;
      background: #fff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .tile img { width: 100%; height: 150px; object-fit: cover; }
    .tile h3 { margin: 0.5rem; font-size: 1.1rem; }
  </style>
</head>
<body>
  <h1>iNaturalist Species Tiles</h1>
  <div class="grid" id="tiles"></div>

  <script>
    async function loadTaxa() {
      const res = await fetch('data/taxa.txt');
      const text = await res.text();
      const ids = text.trim().split('\n');

      const container = document.getElementById('tiles');

      for (const id of ids) {
        try {
          const apiRes = await fetch(`https://api.inaturalist.org/v1/taxa/${id}`);
          const data = await apiRes.json();
          const taxon = data.results[0];

          const tile = document.createElement('a');
          tile.className = 'tile';
          tile.href = `species.html?taxon_id=${taxon.id}`;
          tile.innerHTML = `
            <img src="${taxon.default_photo?.medium || ''}" alt="${taxon.name}">
            <h3>${taxon.preferred_common_name || taxon.name}</h3>
          `;
          container.appendChild(tile);
        } catch (err) {
          console.error(`Could not load taxon ${id}`, err);
        }
      }
    }

    loadTaxa();
  </script>
</body>
</html>
